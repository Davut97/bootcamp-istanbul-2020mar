{"ast":null,"code":"import * as actionTypes from './actionTypes';\nimport { v4 as uuidv4 } from 'uuid';\nimport 'firebase/firestore';\nexport const createList = list => {\n  console.log(list);\n  return (dispatch, getState, {\n    getFirestore\n  }) => {\n    // getfirestore from index middleware\n    const fireStore = getFirestore(); //ref to firestore database\n\n    fireStore.collection('lists').add({ ...list,\n      createdAt: new Date(),\n      isCompleted: false\n    }).then(() => {\n      dispatch({\n        type: actionTypes.ADD_LIST,\n        list\n      });\n    }).catch(error => {\n      dispatch({\n        type: 'CREATE_ERROR',\n        error\n      });\n    });\n  };\n};\nexport const addItem = item => {\n  const {\n    name,\n    amount,\n    id\n  } = item; // console.log(name, amount, id);\n\n  return (dispatch, getState, {\n    getFirebase,\n    getFirestore\n  }) => {\n    //make async call to database\n    const firestore = getFirestore(); // ref to firestore api\n\n    const firebase = getFirebase(); //ref to our data base\n\n    firestore.collection('lists').doc(id).update({\n      items: firebase.firestore.FieldValue.arrayUnion({\n        name: name,\n        amount: amount,\n        id: uuidv4()\n      })\n    }).then(() => {\n      dispatch({\n        type: actionTypes.ADD_ITEM,\n        item\n      });\n    }).catch(err => {\n      dispatch({\n        type: 'UPDATE_UTENTE_ERROR',\n        err\n      });\n    });\n  };\n};\n/**washingtonRef.update({\r\n    regions: firebase.firestore.FieldValue.arrayUnion(\"greater_virginia\")\r\n}); */\n\nexport const deleteItem = item => {\n  const {\n    listId,\n    itemId,\n    itemName,\n    itemAmount\n  } = item; // console.log(name, amount, id);\n\n  console.log(item);\n  return (dispatch, getState, {\n    getFirebase,\n    getFirestore\n  }) => {\n    //make async call to database\n    const firestore = getFirestore(); // ref to firestore api\n\n    const firebase = getFirebase(); //ref to our data base\n\n    firestore.collection('lists').doc(listId).update({\n      items: firebase.firestore.FieldValue.arrayRemove({\n        id: itemId,\n        name: itemName,\n        amount: itemAmount\n      })\n    }).then(() => {\n      dispatch({\n        type: actionTypes.REMOVE_ITEM,\n        item\n      });\n    }).catch(err => {\n      dispatch({\n        type: \"ERROR_ON_DELETE\",\n        err\n      });\n    });\n  };\n};\nexport const editItem = item => {\n  const {\n    listId,\n    itemId,\n    itemName,\n    itemAmount\n  } = item; // console.log(name, amount, id);\n\n  console.log(item);\n  return (dispatch, getState, {\n    getFirebase,\n    getFirestore\n  }) => {\n    //make async call to database\n    const firestore = getFirestore(); // ref to firestore api\n\n    const firebase = getFirebase(); //ref to our data base\n\n    firestore.collection('lists').doc(listId).set({\n      items: [{\n        id: itemId,\n        name: itemName,\n        amount: itemAmount\n      }]\n    }).then(() => {\n      dispatch({\n        type: actionTypes.REMOVE_ITEM,\n        item\n      });\n    }).catch(err => {\n      dispatch({\n        type: \"ERROR_ON_DELETE\",\n        err\n      });\n    });\n  };\n};","map":{"version":3,"sources":["D:/reCoded/ShoppingListPlannerTogether2/shopping-list/src/store/actions/listActions.js"],"names":["actionTypes","v4","uuidv4","createList","list","console","log","dispatch","getState","getFirestore","fireStore","collection","add","createdAt","Date","isCompleted","then","type","ADD_LIST","catch","error","addItem","item","name","amount","id","getFirebase","firestore","firebase","doc","update","items","FieldValue","arrayUnion","ADD_ITEM","err","deleteItem","listId","itemId","itemName","itemAmount","arrayRemove","REMOVE_ITEM","editItem","set"],"mappings":"AAAA,OAAO,KAAKA,WAAZ,MAA6B,eAA7B;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AAEA,OAAO,oBAAP;AACA,OAAO,MAAMC,UAAU,GAAIC,IAAD,IAAU;AAClCC,EAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,SAAO,CAACG,QAAD,EAAWC,QAAX,EAAqB;AAAEC,IAAAA;AAAF,GAArB,KAA0C;AAC/C;AACA,UAAMC,SAAS,GAAGD,YAAY,EAA9B,CAF+C,CAEb;;AAClCC,IAAAA,SAAS,CACNC,UADH,CACc,OADd,EAEGC,GAFH,CAEO,EACH,GAAGR,IADA;AAEHS,MAAAA,SAAS,EAAE,IAAIC,IAAJ,EAFR;AAGHC,MAAAA,WAAW,EAAC;AAHT,KAFP,EAOGC,IAPH,CAOQ,MAAM;AACVT,MAAAA,QAAQ,CAAC;AAAEU,QAAAA,IAAI,EAAEjB,WAAW,CAACkB,QAApB;AAA8Bd,QAAAA;AAA9B,OAAD,CAAR;AACD,KATH,EAUGe,KAVH,CAUUC,KAAD,IAAW;AAChBb,MAAAA,QAAQ,CAAC;AAAEU,QAAAA,IAAI,EAAE,cAAR;AAAwBG,QAAAA;AAAxB,OAAD,CAAR;AACD,KAZH;AAaD,GAhBD;AAiBD,CAnBM;AAoBP,OAAO,MAAMC,OAAO,GAAIC,IAAD,IAAU;AAC/B,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,MAAR;AAAgBC,IAAAA;AAAhB,MAAuBH,IAA7B,CAD+B,CAE/B;;AAEA,SAAO,CAACf,QAAD,EAAWC,QAAX,EAAqB;AAAEkB,IAAAA,WAAF;AAAejB,IAAAA;AAAf,GAArB,KAAuD;AAC5D;AAEA,UAAMkB,SAAS,GAAGlB,YAAY,EAA9B,CAH4D,CAG1B;;AAClC,UAAMmB,QAAQ,GAAGF,WAAW,EAA5B,CAJ4D,CAI5B;;AAChCC,IAAAA,SAAS,CACNhB,UADH,CACc,OADd,EAEGkB,GAFH,CAEOJ,EAFP,EAGGK,MAHH,CAGU;AACNC,MAAAA,KAAK,EAAEH,QAAQ,CAACD,SAAT,CAAmBK,UAAnB,CAA8BC,UAA9B,CAAyC;AAC9CV,QAAAA,IAAI,EAAEA,IADwC;AAE9CC,QAAAA,MAAM,EAAEA,MAFsC;AAG9CC,QAAAA,EAAE,EAAEvB,MAAM;AAHoC,OAAzC;AADD,KAHV,EAUGc,IAVH,CAUQ,MAAM;AACVT,MAAAA,QAAQ,CAAC;AAAEU,QAAAA,IAAI,EAAEjB,WAAW,CAACkC,QAApB;AAA8BZ,QAAAA;AAA9B,OAAD,CAAR;AACD,KAZH,EAaGH,KAbH,CAaUgB,GAAD,IAAS;AACd5B,MAAAA,QAAQ,CAAC;AAAEU,QAAAA,IAAI,EAAE,qBAAR;AAA+BkB,QAAAA;AAA/B,OAAD,CAAR;AACD,KAfH;AAgBD,GArBD;AAsBD,CA1BM;AA2BP;;;;AAGA,OAAO,MAAMC,UAAU,GAAId,IAAD,IAAU;AAClC,QAAM;AAAEe,IAAAA,MAAF;AAASC,IAAAA,MAAT;AAAgBC,IAAAA,QAAhB;AAAyBC,IAAAA;AAAzB,MAAwClB,IAA9C,CADkC,CAElC;;AACAjB,EAAAA,OAAO,CAACC,GAAR,CAAYgB,IAAZ;AACA,SAAO,CAACf,QAAD,EAAWC,QAAX,EAAqB;AAAEkB,IAAAA,WAAF;AAAejB,IAAAA;AAAf,GAArB,KAAuD;AAC5D;AAEA,UAAMkB,SAAS,GAAGlB,YAAY,EAA9B,CAH4D,CAG1B;;AAClC,UAAMmB,QAAQ,GAAGF,WAAW,EAA5B,CAJ4D,CAI5B;;AAChCC,IAAAA,SAAS,CACNhB,UADH,CACc,OADd,EAEGkB,GAFH,CAEOQ,MAFP,EAGGP,MAHH,CAGU;AACNC,MAAAA,KAAK,EAAEH,QAAQ,CAACD,SAAT,CAAmBK,UAAnB,CAA8BS,WAA9B,CAA0C;AAAChB,QAAAA,EAAE,EAACa,MAAJ;AAAWf,QAAAA,IAAI,EAACgB,QAAhB;AAAyBf,QAAAA,MAAM,EAACgB;AAAhC,OAA1C;AADD,KAHV,EAMGxB,IANH,CAMQ,MAAM;AACVT,MAAAA,QAAQ,CAAC;AAAEU,QAAAA,IAAI,EAAEjB,WAAW,CAAC0C,WAApB;AAAiCpB,QAAAA;AAAjC,OAAD,CAAR;AACD,KARH,EASGH,KATH,CASUgB,GAAD,IAAS;AACd5B,MAAAA,QAAQ,CAAC;AAAEU,QAAAA,IAAI,EAAE,iBAAR;AAA2BkB,QAAAA;AAA3B,OAAD,CAAR;AACD,KAXH;AAYD,GAjBD;AAkBD,CAtBM;AAuBP,OAAO,MAAMQ,QAAQ,GAAIrB,IAAD,IAAU;AAChC,QAAM;AAAEe,IAAAA,MAAF;AAASC,IAAAA,MAAT;AAAgBC,IAAAA,QAAhB;AAAyBC,IAAAA;AAAzB,MAAwClB,IAA9C,CADgC,CAEhC;;AACAjB,EAAAA,OAAO,CAACC,GAAR,CAAYgB,IAAZ;AACA,SAAO,CAACf,QAAD,EAAWC,QAAX,EAAqB;AAAEkB,IAAAA,WAAF;AAAejB,IAAAA;AAAf,GAArB,KAAuD;AAC5D;AAEA,UAAMkB,SAAS,GAAGlB,YAAY,EAA9B,CAH4D,CAG1B;;AAClC,UAAMmB,QAAQ,GAAGF,WAAW,EAA5B,CAJ4D,CAI5B;;AAChCC,IAAAA,SAAS,CACNhB,UADH,CACc,OADd,EAEGkB,GAFH,CAEOQ,MAFP,EAGGO,GAHH,CAGO;AACHb,MAAAA,KAAK,EAAE,CAAC;AAACN,QAAAA,EAAE,EAACa,MAAJ;AAAWf,QAAAA,IAAI,EAACgB,QAAhB;AAAyBf,QAAAA,MAAM,EAACgB;AAAhC,OAAD;AADJ,KAHP,EAMGxB,IANH,CAMQ,MAAM;AACVT,MAAAA,QAAQ,CAAC;AAAEU,QAAAA,IAAI,EAAEjB,WAAW,CAAC0C,WAApB;AAAiCpB,QAAAA;AAAjC,OAAD,CAAR;AACD,KARH,EASGH,KATH,CASUgB,GAAD,IAAS;AACd5B,MAAAA,QAAQ,CAAC;AAAEU,QAAAA,IAAI,EAAE,iBAAR;AAA2BkB,QAAAA;AAA3B,OAAD,CAAR;AACD,KAXH;AAYD,GAjBD;AAkBD,CAtBM","sourcesContent":["import * as actionTypes from './actionTypes';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nimport 'firebase/firestore';\r\nexport const createList = (list) => {\r\n  console.log(list);\r\n  return (dispatch, getState, { getFirestore }) => {\r\n    // getfirestore from index middleware\r\n    const fireStore = getFirestore(); //ref to firestore database\r\n    fireStore\r\n      .collection('lists')\r\n      .add({\r\n        ...list,\r\n        createdAt: new Date(),\r\n        isCompleted:false,\r\n      })\r\n      .then(() => {\r\n        dispatch({ type: actionTypes.ADD_LIST, list });\r\n      })\r\n      .catch((error) => {\r\n        dispatch({ type: 'CREATE_ERROR', error });\r\n      });\r\n  };\r\n};\r\nexport const addItem = (item) => {\r\n  const { name, amount, id } = item;\r\n  // console.log(name, amount, id);\r\n\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n    //make async call to database\r\n\r\n    const firestore = getFirestore(); // ref to firestore api\r\n    const firebase = getFirebase(); //ref to our data base\r\n    firestore\r\n      .collection('lists')\r\n      .doc(id)\r\n      .update({\r\n        items: firebase.firestore.FieldValue.arrayUnion({\r\n          name: name,\r\n          amount: amount,\r\n          id :uuidv4(),\r\n        }),\r\n      })\r\n      .then(() => {\r\n        dispatch({ type: actionTypes.ADD_ITEM, item });\r\n      })\r\n      .catch((err) => {\r\n        dispatch({ type: 'UPDATE_UTENTE_ERROR', err });\r\n      });\r\n  };\r\n};\r\n/**washingtonRef.update({\r\n    regions: firebase.firestore.FieldValue.arrayUnion(\"greater_virginia\")\r\n}); */\r\nexport const deleteItem = (item) => {\r\n  const { listId,itemId,itemName,itemAmount } = item;\r\n  // console.log(name, amount, id);\r\n  console.log(item)\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n    //make async call to database\r\n\r\n    const firestore = getFirestore(); // ref to firestore api\r\n    const firebase = getFirebase(); //ref to our data base\r\n    firestore\r\n      .collection('lists')\r\n      .doc(listId)\r\n      .update({\r\n        items: firebase.firestore.FieldValue.arrayRemove({id:itemId,name:itemName,amount:itemAmount})\r\n      })\r\n      .then(() => {\r\n        dispatch({ type: actionTypes.REMOVE_ITEM, item });\r\n      })\r\n      .catch((err) => {\r\n        dispatch({ type: \"ERROR_ON_DELETE\", err });\r\n      });\r\n  };\r\n};\r\nexport const editItem = (item) => {\r\n  const { listId,itemId,itemName,itemAmount } = item;\r\n  // console.log(name, amount, id);\r\n  console.log(item)\r\n  return (dispatch, getState, { getFirebase, getFirestore }) => {\r\n    //make async call to database\r\n\r\n    const firestore = getFirestore(); // ref to firestore api\r\n    const firebase = getFirebase(); //ref to our data base\r\n    firestore\r\n      .collection('lists')\r\n      .doc(listId)\r\n      .set({\r\n        items: [{id:itemId,name:itemName,amount:itemAmount}]\r\n      })\r\n      .then(() => {\r\n        dispatch({ type: actionTypes.REMOVE_ITEM, item });\r\n      })\r\n      .catch((err) => {\r\n        dispatch({ type: \"ERROR_ON_DELETE\", err });\r\n      });\r\n  };\r\n};"]},"metadata":{},"sourceType":"module"}